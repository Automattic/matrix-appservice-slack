Be stricter about API responses and reduce linter warnings